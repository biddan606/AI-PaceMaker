# AI 페이스메이커 Pull Request 컨벤션

## 1. 개요

### 문서 목적
AI 페이스메이커 프로젝트의 Pull Request 작성 가이드입니다.

### 핵심 원칙
**"변경 사항을 명확하고 이해하기 쉽게 작성하면 충분하다"**

- 무엇을 변경했는지 (What)
- 왜 변경했는지 (Why)
- 간결하고 명확하게

---

## 2. PR 제목 규칙

### 기본 형식

```
[상태] type: 설명
```

**예시:**
```bash
[부분] feat: 사용자 인증 와이어프레임 디자인
[완료] feat: AI 백로그 구체화 기능 완성
[핫픽스] fix: JWT 토큰 갱신 로직 오류 수정
```

### 상태 및 이슈 참조

| 상태 | PR 본문 이슈 참조 |
|------|-------------------|
| `[부분]` | `Partially addresses #이슈번호` |
| `[완료]` | `Closes #이슈번호` |
| `[핫픽스]` | `Closes #이슈번호` |

### 타입 (커밋 메시지와 동일)

`feat`, `fix`, `docs`, `refactor`, `style`, `test`, `chore`, `perf`, `ci`, `build`, `init`, `docker`

---

## 3. 좋은 PR 작성 예시

### 예시 1: 부분 작업 PR

**제목:**
```
[부분] feat: JWT 토큰 발급 API 구현
```

**본문:**
```markdown
## 변경 사항

BE-02 이슈의 1단계 작업으로, JWT Access Token과 Refresh Token 발급 로직을 구현했습니다.

### 구현 내용
- JWT 토큰 생성 및 서명 로직 (`JwtService`)
- 로그인 API 엔드포인트 (`POST /auth/login`)
- Access Token 1시간, Refresh Token 14일 유효기간 설정

### 다음 작업
BE-02의 2단계에서 토큰 갱신 및 로그아웃 API를 구현할 예정입니다.

## PR 정보

**유형:**
- [x] 부분 작업

**이슈 참조:**
- Partially addresses #BE-02

## 체크리스트

- [x] 로컬 테스트 완료
- [x] 커밋 메시지 컨벤션 준수
- [x] 의존성 선행 작업(DO-02) 완료 확인
- [x] 불필요한 코드 제거
```

### 예시 2: 완료 작업 PR

**제목:**
```
[완료] feat: 사용자 인증 UI 및 토큰 관리 완성
```

**본문:**
```markdown
## 변경 사항

회원가입, 로그인, 로그아웃 및 자동 토큰 갱신 기능을 완성했습니다.

### 주요 구현
- 회원가입/로그인 UI 컴포넌트
- JWT 토큰 자동 저장 및 관리
- API 401 에러 시 자동 토큰 갱신 인터셉터
- Refresh Token 만료 시 자동 로그아웃 처리

### 테스트 방법
1. 회원가입 → 이메일 인증 → 로그인
2. 1시간 후 API 호출 시 자동 갱신 확인
3. 로그아웃 시 토큰 삭제 확인

### 스크린샷
![로그인 화면](링크)
![회원가입 화면](링크)

## PR 정보

**유형:**
- [x] 완료 작업

**이슈 참조:**
- Closes #FE-01

## 체크리스트

- [x] 로컬 테스트 완료
- [x] 커밋 메시지 컨벤션 준수
- [x] 의존성 선행 작업(DS-01, BE-01, BE-02) 완료 확인
- [x] 불필요한 코드 제거
```

### 예시 3: 핫픽스 PR

**제목:**
```
[핫픽스] fix: JWT 토큰 갱신 무한 루프 수정
```

**본문:**
```markdown
## 변경 사항

토큰 갱신 API도 401을 반환할 때 무한 루프가 발생하는 버그를 수정했습니다.

### 문제
토큰 갱신 API(`/auth/refresh`)가 401을 반환할 때,
인터셉터가 이를 다시 갱신하려 시도하여 무한 루프 발생

### 해결
갱신 API는 인터셉터에서 제외하도록 수정

### 테스트
1. Refresh Token 만료 상태에서 API 호출
2. 예상: 1번만 갱신 시도 후 로그아웃 ✅

## PR 정보

**유형:**
- [x] 핫픽스

**이슈 참조:**
- Closes #BUG-15

## 체크리스트

- [x] 로컬 테스트 완료
- [x] 커밋 메시지 컨벤션 준수
- [x] 의존성 선행 작업 완료 확인
- [x] 불필요한 코드 제거
```

---

## 4. 부분 작업 PR 가이드

### 부분 작업이란?

하나의 큰 이슈를 여러 PR로 나누어 처리:

```
DS-01 이슈 (사용자 인증 UI/UX 설계)
├── PR #12: [부분] feat: 와이어프레임 디자인
├── PR #15: [부분] feat: UI 컴포넌트 구현
└── PR #18: [완료] feat: 인터랙션 및 접근성 개선

BE-03 이슈 (AI 백로그 API)
├── PR #23: [부분] feat: AI 대화 스트리밍 API 구현
├── PR #28: [부분] feat: 백로그 CRUD API 구현
└── PR #32: [완료] feat: LLM 프롬프트 외부 설정 관리
```

### 부분 작업 PR 작성 시 주의사항

1. **범위를 명확히**
   - 이번 PR의 범위가 무엇인지
   - 다음 PR에서 무엇을 할 것인지

2. **다음 작업과의 연결**
   - 후속 작업을 위한 인터페이스가 명확한지
   - TODO 주석으로 후속 작업 표시

3. **독립적 실행 가능**
   - 이 PR만으로도 빌드 가능
   - 기존 기능 정상 동작

---

## 5. 참고 사항

### Merge 방식

| PR 유형 | 권장 방식 | 이유 |
|---------|-----------|------|
| 부분 작업 | 일반 Merge | 단계별 과정 보존 |
| 완료 작업 | 일반 Merge | 전체 과정 추적 |
| 핫픽스 | Squash Merge | 명확한 단일 기록 |

### 라벨 전략

**자동 매핑:**
- Issue의 `type:*` 라벨을 PR에 자동 적용

**상태 라벨:**
- `status:부분완료`
- `status:완료`
- `status:핫픽스`

---

## 6. 참고 자료

- [커밋 메시지 컨벤션](./commit-convention.md)
- [Git 브랜치 전략](./git-branch-strategy.md)
- [프로젝트 README](../README.md)

---

*변경 사항을 명확하고 이해하기 쉽게 작성하는 것이 가장 중요합니다.*