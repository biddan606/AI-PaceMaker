# 인증 시스템 디자인 명세서

**작업 ID:** v1.0.0/DS/01
**작성일:** 2025-10-14
**상태:** 설계 완료
**의존성:** v1.0.0/DS/00 (레이아웃 및 네비게이션 시스템)

---

## 1. 개요

### 1.1 목적
AI 페이스메이커 서비스의 사용자 인증 플로우 전체를 설계하여, 회원가입부터 로그인까지 직관적이고 안전한 사용자 경험을 제공한다.

### 1.2 사용자 스토리
> When 서비스를 처음 사용하거나 재접속할 때, 사용자는 직관적이고 안전한 인증 과정을 통해 빠르게 자신의 작업 공간에 접근하고 싶어한다.

### 1.3 범위
- 회원가입 플로우
- 로그인 플로우
- 로그아웃 처리
- 세션 만료 처리
- 인증 UI/UX 디자인
- 에러 및 피드백 시스템

---

## 2. 인증 플로우 설계

### 2.1 전체 사용자 여정 (User Journey)

```
┌─────────────────────────────────────────────────────────┐
│                    랜딩 페이지 (/)                        │
│                                                          │
│   [무료로 시작하기] ────────┐                            │
│   [로그인] ────────────┐    │                            │
└────────────────────────│────│────────────────────────────┘
                         │    │
                         │    ▼
                         │  ┌──────────────────────────────┐
                         │  │  회원가입 (/signup)          │
                         │  │                              │
                         │  │  - 이름 입력                 │
                         │  │  - 이메일 입력 & 유효성 검사 │
                         │  │  - 비밀번호 입력 (8자 이상)  │
                         │  │  - 비밀번호 확인             │
                         │  │                              │
                         │  │  [회원가입] 버튼 클릭        │
                         │  └──────────┬───────────────────┘
                         │             │
                         │             ▼
                         │  ┌──────────────────────────────┐
                         │  │  회원가입 처리               │
                         │  │  (성공 시 로그인 페이지 이동)│
                         │  └──────────┬───────────────────┘
                         │             │
                         ▼             ▼
                   ┌──────────────────────────────┐
                   │  로그인 (/login)              │
                   │                               │
                   │  - 이메일 입력                │
                   │  - 비밀번호 입력              │
                   │                               │
                   │  [로그인] 버튼 클릭           │
                   └──────────┬────────────────────┘
                              │
                              ▼
                   ┌──────────────────────────────┐
                   │  로그인 처리                  │
                   │  (성공 시 세션 생성)          │
                   └──────────┬────────────────────┘
                              │
                              ▼
                   ┌──────────────────────────────┐
                   │  백로그 페이지 (/app/backlog) │
                   │  (로그인 후 첫 화면)          │
                   └───────────────────────────────┘
```

### 2.2 시나리오별 플로우

#### 시나리오 1: 신규 사용자 회원가입
1. 랜딩 페이지에서 **[무료로 시작하기]** 클릭
2. `/signup` 페이지로 이동
3. 사용자 정보 입력:
   - 이름 (필수)
   - 이메일 (필수, 이메일 형식 검증)
   - 비밀번호 (필수, 최소 8자)
   - 비밀번호 확인 (필수, 비밀번호 일치 검증)
4. **[회원가입]** 버튼 클릭
5. **성공 시**: 로그인 페이지로 리다이렉트 + 성공 메시지 표시
6. **실패 시**: 에러 메시지 인라인 표시 (예: "이미 존재하는 이메일입니다")

#### 시나리오 2: 기존 사용자 로그인
1. 랜딩 페이지 또는 회원가입 페이지에서 **[로그인]** 클릭
2. `/login` 페이지로 이동
3. 이메일, 비밀번호 입력
4. **[로그인]** 버튼 클릭
5. **성공 시**: `/app/backlog` 페이지로 리다이렉트
6. **실패 시**: 에러 메시지 표시 (예: "이메일 또는 비밀번호가 올바르지 않습니다")

#### 시나리오 3: 로그아웃
1. 헤더의 사용자 메뉴에서 **[로그아웃]** 클릭
2. 세션 종료 처리
3. `/login` 페이지로 리다이렉트

#### 시나리오 4: 세션 만료
1. 사용자가 로그인 필요 페이지 접근 시 세션 확인
2. **세션 없음/만료**: `/login?redirect=/app/backlog` 리다이렉트
3. 로그인 성공 후 원래 페이지로 자동 이동

---

## 3. UI/UX 명세

### 3.1 공통 디자인 패턴

#### 3.1.1 레이아웃 구조
- **화면 정렬**: 중앙 정렬 (수직, 수평)
- **최소 높이**: 헤더를 제외한 전체 화면 (`min-h-[calc(100vh-4rem)]`)
- **카드 최대 너비**: 448px (`max-w-md`)
- **모바일 여백**: 16px (`p-4`)
- **카드 배경**: 흰색 배경 + 미세한 그림자

#### 3.1.2 폼 디자인 원칙
- **입력 필드 간격**: 16px (일관된 수직 리듬)
- **레이블-입력 간격**: 4px (시각적 그룹핑)
- **버튼 위치**: 폼 하단, 전체 너비
- **링크 위치**: 버튼 하단 중앙 정렬

### 3.2 회원가입 페이지 (`/signup`)

#### 3.2.1 화면 구성
```
┌──────────────────────────────────────┐
│         [Header: Logo + 로그인]       │
├──────────────────────────────────────┤
│                                      │
│  ┌────────────────────────────────┐  │
│  │  회원가입                       │  │
│  │  성장의 여정을 시작하세요        │  │
│  │                                │  │
│  │  [이름]                        │  │
│  │  ┌──────────────────────────┐  │  │
│  │  │ 홍길동                   │  │  │
│  │  └──────────────────────────┘  │  │
│  │                                │  │
│  │  [이메일]                      │  │
│  │  ┌──────────────────────────┐  │  │
│  │  │ example@email.com        │  │  │
│  │  └──────────────────────────┘  │  │
│  │                                │  │
│  │  [비밀번호]                    │  │
│  │  ┌──────────────────────────┐  │  │
│  │  │ ••••••••                 │  │  │
│  │  └──────────────────────────┘  │  │
│  │  8자 이상 입력                 │  │
│  │                                │  │
│  │  [비밀번호 확인]               │  │
│  │  ┌──────────────────────────┐  │  │
│  │  │ ••••••••                 │  │  │
│  │  └──────────────────────────┘  │  │
│  │                                │  │
│  │  ┌──────────────────────────┐  │  │
│  │  │      회원가입            │  │  │
│  │  └──────────────────────────┘  │  │
│  │                                │  │
│  │  이미 계정이 있으신가요? 로그인 │  │
│  └────────────────────────────────┘  │
│                                      │
└──────────────────────────────────────┘
```

#### 3.2.2 필드 명세

| 필드명 | 타입 | 검증 규칙 | 플레이스홀더 | 에러 메시지 |
|--------|------|-----------|-------------|------------|
| 이름 | text | 필수, 1자 이상 | "홍길동" | "이름을 입력해주세요" |
| 이메일 | email | 필수, 이메일 형식 | "example@email.com" | "올바른 이메일 주소를 입력해주세요" |
| 비밀번호 | password | 필수, 최소 8자 | "8자 이상 입력" | "비밀번호는 8자 이상이어야 합니다" |
| 비밀번호 확인 | password | 필수, 비밀번호 일치 | "비밀번호 재입력" | "비밀번호가 일치하지 않습니다" |

#### 3.2.3 상호작용 요소
- **제목**: "회원가입" (24px, Bold, Gray 900)
- **부제목**: "성장의 여정을 시작하세요" (14px, Gray 500)
- **버튼**: "회원가입" (Coral 색상, 전체 너비, 중간 굵기)
- **하단 링크**: "이미 계정이 있으신가요? **로그인**" (로그인 부분은 Coral 색상)

### 3.3 로그인 페이지 (`/login`)

#### 3.3.1 화면 구성
```
┌──────────────────────────────────────┐
│         [Header: Logo + 회원가입]     │
├──────────────────────────────────────┤
│                                      │
│  ┌────────────────────────────────┐  │
│  │  로그인                         │  │
│  │  AI 페이스메이커에 오신 것을     │  │
│  │  환영합니다                     │  │
│  │                                │  │
│  │  [이메일]                      │  │
│  │  ┌──────────────────────────┐  │  │
│  │  │ example@email.com        │  │  │
│  │  └──────────────────────────┘  │  │
│  │                                │  │
│  │  [비밀번호]                    │  │
│  │  ┌──────────────────────────┐  │  │
│  │  │ ••••••••                 │  │  │
│  │  └──────────────────────────┘  │  │
│  │                                │  │
│  │  ┌──────────────────────────┐  │  │
│  │  │      로그인              │  │  │
│  │  └──────────────────────────┘  │  │
│  │                                │  │
│  │  계정이 없으신가요? 회원가입    │  │
│  └────────────────────────────────┘  │
│                                      │
└──────────────────────────────────────┘
```

#### 3.3.2 필드 명세

| 필드명 | 타입 | 검증 규칙 | 플레이스홀더 | 에러 메시지 |
|--------|------|-----------|-------------|------------|
| 이메일 | email | 필수, 이메일 형식 | "example@email.com" | "올바른 이메일 주소를 입력해주세요" |
| 비밀번호 | password | 필수 | "••••••••" | "비밀번호를 입력해주세요" |

#### 3.3.3 상호작용 요소
- **제목**: "로그인" (24px, Bold, Gray 900)
- **부제목**: "AI 페이스메이커에 오신 것을 환영합니다" (14px, Gray 500)
- **버튼**: "로그인" (Coral 색상, 전체 너비, 중간 굵기)
- **하단 링크**: "계정이 없으신가요? **회원가입**" (회원가입 부분은 Coral 색상)

---

## 4. 상태별 시각적 피드백 디자인

### 4.1 입력 필드 상태

#### 4.1.1 기본 상태
- **테두리**: Gray 200 (1px solid)
- **배경**: 흰색
- **텍스트**: Gray 900

#### 4.1.2 포커스 상태
- **테두리**: Primary 색상 (Purple)
- **외곽선**: Primary 색상 포커스 링 (4px, 20% 투명도)
- **배경**: 흰색 유지

#### 4.1.3 에러 상태
- **테두리**: Destructive 색상 (Red)
- **에러 메시지**: 필드 하단에 표시 (14px, Red, 4px 상단 여백)

#### 4.1.4 비활성화 상태
- **배경**: Gray 50
- **텍스트**: Gray 400
- **테두리**: Gray 200
- **커서**: `not-allowed`

### 4.2 버튼 상태

#### 4.2.1 기본 상태
- **배경**: Coral (#FF6B4A)
- **텍스트**: 흰색
- **높이**: 48px (py-3)
- **전체 너비**: 100%

#### 4.2.2 호버 상태
- **배경**: Dark Coral (#FF5A39)
- **전환 효과**: 200ms ease-in-out

#### 4.2.3 로딩 상태
- **스피너 아이콘**: 회전 애니메이션
- **텍스트**: "처리 중..."
- **배경**: Coral 유지 (75% 불투명도)
- **비활성화**: 클릭 불가

#### 4.2.4 비활성화 상태
- **배경**: Coral (50% 불투명도)
- **커서**: `not-allowed`

### 4.3 에러 및 성공 메시지

#### 4.3.1 인라인 에러 (필드별)
- **위치**: 입력 필드 바로 하단
- **여백**: 4px 상단
- **텍스트**: 14px, Red, Medium
- **아이콘**: 선택적 (에러 아이콘)

#### 4.3.2 전역 에러 (폼 상단)
- **위치**: 폼 상단 (제목과 첫 입력 필드 사이)
- **배경**: Red 10% 투명도
- **테두리**: Red 20% 투명도, 1px solid
- **패딩**: 16px
- **둥근 모서리**: 8px
- **텍스트**: 14px, Red, Medium

#### 4.3.3 성공 메시지
- **배경**: Green 10% 투명도
- **테두리**: Green 20% 투명도
- **텍스트**: 14px, Green, Medium
- **표시 시점**: 회원가입 성공 후 로그인 페이지 진입 시

---

## 5. 접근성 (Accessibility)

### 5.1 키보드 네비게이션
- **Tab**: 필드 간 순차 이동 (이름 → 이메일 → 비밀번호 → 비밀번호 확인 → 버튼 → 링크)
- **Shift + Tab**: 역순 이동
- **Enter**: 폼 제출 (버튼 포커스 여부 무관)
- **포커스 표시**: 명확한 포커스 링 (Primary 색상, 4px)

### 5.2 스크린 리더 지원

#### 5.2.1 시맨틱 구조
- `<form>` 태그에 `aria-labelledby` 속성으로 제목 연결
- `<label>` 태그와 `for` 속성으로 입력 필드 연결
- 버튼 `type="submit"` 명시

#### 5.2.2 에러 알림
- 입력 필드에 `aria-invalid="true"` 추가 (에러 시)
- 에러 메시지 `id`를 `aria-describedby`로 연결
- 에러 메시지에 `role="alert"` 추가 (동적 에러)

#### 5.2.3 필수 필드 표시
- `aria-required="true"` 속성 추가
- 시각적 표시 (레이블에 * 또는 (필수) 텍스트)

### 5.3 컬러 대비
- **텍스트-배경 대비**: WCAG AA 기준 (최소 4.5:1)
- **버튼 텍스트**: 흰색 텍스트 + Coral 배경 (충분한 대비)
- **에러 메시지**: Red 텍스트 + 흰색 배경 (충분한 대비)

---

## 6. 보안 요구사항

### 6.1 클라이언트 사이드 검증
- **이메일 형식**: HTML5 `type="email"` + JavaScript 정규식
- **비밀번호 조건**: 최소 8자 (향후 복잡도 규칙 추가 고려)
- **비밀번호 일치**: 실시간 검증 (입력 시마다 확인)

### 6.2 서버 사이드 검증 (백엔드 요구사항)
- **이메일 중복 체크**: DB 조회 후 검증
- **비밀번호 해싱**: bcrypt 등 단방향 암호화 (평문 저장 금지)
- **Rate Limiting**: 로그인 시도 제한 (예: 5회 실패 시 5분 차단)

### 6.3 세션 관리
- **세션 생성**: 로그인 성공 시 서버에서 세션 ID 생성
- **세션 저장**: HTTP-only 쿠키 (XSS 방어)
- **세션 만료**: 일정 시간 비활동 시 자동 만료 (예: 7일)

### 6.4 CSRF 방어
- SvelteKit의 자동 CSRF 토큰 활용
- 폼 제출 시 토큰 검증

### 6.5 XSS 방어
- 사용자 입력 자동 이스케이프 (Svelte 기본 동작)
- `{@html}` 사용 금지

### 6.6 비밀번호 보안
- **마스킹**: `type="password"` 사용
- **자동완성**:
  - 로그인: `autocomplete="current-password"`
  - 회원가입: `autocomplete="new-password"`
- **브라우저 저장**: 사용자 선택에 따라 브라우저 기본 기능 활용

---

## 7. 컴포넌트 설계

### 7.1 필요한 컴포넌트 목록

#### 7.1.1 AuthCard
- **책임**: 인증 화면의 중앙 카드 래퍼
- **재사용성**: 로그인, 회원가입 페이지 공통
- **Props**: `title` (제목), `description` (부제목)

#### 7.1.2 FormInput
- **책임**: 레이블, 입력 필드, 에러 메시지 통합
- **재사용성**: 모든 폼 입력 필드
- **Props**: `label`, `type`, `placeholder`, `error`, `required` 등
- **기능**: 유효성 검사 상태 표시, 접근성 속성 자동 처리

#### 7.1.3 LoadingButton
- **책임**: 로딩 상태를 시각적으로 표시하는 버튼
- **재사용성**: 모든 비동기 액션 버튼
- **Props**: `loading`, `disabled`, `type`, `variant`
- **기능**: 로딩 중 스피너 표시, 자동 비활성화

#### 7.1.4 ErrorAlert
- **책임**: 전역 에러 메시지 표시
- **재사용성**: 폼 상단 에러, 성공 메시지
- **Props**: `message`, `type` (error/success/info)
- **기능**: 메시지 타입별 스타일링, 접근성 속성

---

## 8. 디자인 토큰

### 8.1 컬러 팔레트

| 용도 | 클래스/값 | 색상 코드 |
|------|-----------|-----------|
| 주요 액션 버튼 | `bg-[#FF6B4A]` | #FF6B4A (Coral) |
| 버튼 호버 | `hover:bg-[#FF5A39]` | #FF5A39 (Dark Coral) |
| 제목 텍스트 | `text-[#171717]` | #171717 (Gray 900) |
| 레이블 텍스트 | `text-[#404040]` | #404040 (Gray 700) |
| 부제목 텍스트 | `text-[#737373]` | #737373 (Gray 500) |
| 링크 | `text-[#FF6B4A]` | #FF6B4A (Coral) |
| 테두리 | `border-[#E5E5E5]` | #E5E5E5 (Gray 200) |
| 배경 (카드) | `bg-white` | #FFFFFF |
| 에러 | `text-destructive` | CSS 변수 (Red) |
| 성공 | `text-accent` | CSS 변수 (Green) |

### 8.2 타이포그래피

| 용도 | 클래스 | 크기/굵기 |
|------|--------|-----------|
| 페이지 제목 | `text-2xl font-bold` | 24px / Bold |
| 부제목 | `text-sm` | 14px / Regular |
| 레이블 | `text-sm font-medium` | 14px / Medium |
| 에러 메시지 | `text-sm` | 14px / Regular |
| 버튼 텍스트 | `font-medium` | 16px / Medium |

### 8.3 여백 시스템 (8pt Grid)

| 용도 | 클래스 | 픽셀 값 |
|------|--------|---------|
| 제목-부제목 | `mb-2` | 8px |
| 부제목-폼 | `mb-6` | 24px |
| 레이블-입력 | `mb-1` | 4px |
| 입력 필드 간격 | `space-y-4` | 16px |
| 카드 패딩 | `p-6` | 24px |
| 모바일 외부 여백 | `p-4` | 16px |

### 8.4 애니메이션

| 용도 | 클래스 | 지속 시간 |
|------|--------|-----------|
| 버튼 호버 | `transition-colors` | 200ms |
| 스피너 회전 | `animate-spin` | 1000ms (무한) |

---

## 9. 반응형 디자인

### 9.1 브레이크포인트

| 디바이스 | 화면 크기 | 변경사항 |
|---------|----------|---------|
| Mobile | < 640px | 기본 레이아웃 유지 (카드 448px, 패딩 16px) |
| Tablet | 640px - 1024px | 동일 |
| Desktop | ≥ 1024px | 동일 |

**참고**: 인증 화면은 모든 디바이스에서 동일한 레이아웃을 유지합니다. 카드의 최대 너비가 448px로 제한되어 있어 큰 화면에서도 중앙 정렬된 형태로 표시됩니다.

---

## 10. 에러 메시지 사전

### 10.1 회원가입 에러

| 상황 | 메시지 |
|------|--------|
| 이름 누락 | "이름을 입력해주세요" |
| 이메일 누락 | "이메일을 입력해주세요" |
| 이메일 형식 오류 | "올바른 이메일 주소를 입력해주세요" |
| 이메일 중복 | "이미 존재하는 이메일입니다" |
| 비밀번호 누락 | "비밀번호를 입력해주세요" |
| 비밀번호 길이 부족 | "비밀번호는 8자 이상이어야 합니다" |
| 비밀번호 불일치 | "비밀번호가 일치하지 않습니다" |
| 서버 오류 | "회원가입 중 오류가 발생했습니다. 잠시 후 다시 시도해주세요" |
| 네트워크 오류 | "네트워크 연결을 확인해주세요" |

### 10.2 로그인 에러

| 상황 | 메시지 |
|------|--------|
| 이메일 누락 | "이메일을 입력해주세요" |
| 비밀번호 누락 | "비밀번호를 입력해주세요" |
| 인증 실패 | "이메일 또는 비밀번호가 올바르지 않습니다" |
| 계정 미존재 | "등록되지 않은 이메일입니다" |
| 계정 잠김 | "너무 많은 로그인 시도가 있었습니다. 5분 후 다시 시도해주세요" |
| 네트워크 오류 | "네트워크 연결을 확인해주세요" |
| 서버 오류 | "로그인 중 오류가 발생했습니다. 잠시 후 다시 시도해주세요" |

---

## 11. 완료 조건 (Acceptance Criteria)

### 설계 단계 (현재)
- [x] 회원가입부터 로그인까지 전체 플로우 와이어프레임 완성
- [x] 각 인증 화면의 UI 컴포넌트 설계 완료
- [x] 에러 상태별 시각적 피드백 디자인 완료
- [x] 개발팀이 구현 가능한 수준의 디자인 스펙 문서 완성

### 구현 단계 (후속: v1.0.0/FE/01)
- [ ] 인증 관련 재사용 가능한 컴포넌트 구현 (AuthCard, FormInput, LoadingButton, ErrorAlert)
- [ ] 회원가입 페이지 리팩토링 (컴포넌트 활용)
- [ ] 로그인 페이지 리팩토링 (컴포넌트 활용)
- [ ] 클라이언트 사이드 폼 검증 로직 구현
- [ ] 로딩/에러 상태 처리 구현
- [ ] 접근성 테스트 (키보드 네비게이션, 스크린 리더)
- [ ] 백엔드 API 연동 (회원가입, 로그인)
- [ ] 세션 관리 로직 구현

---

## 12. 참고 자료

### 12.1 내부 문서
- [레이아웃 및 네비게이션 시스템](./00-layout-navigation.md)
- [디자인 시스템 CSS](../../frontend/src/app.css)
- [제품 명세서](../product_spec.md)
- [기술 명세서](../technical_spec.md)

### 12.2 디자인 참고
- **기존 구현**:
  - [로그인 페이지](../../frontend/src/routes/(public)/login/+page.svelte)
  - [회원가입 페이지](../../frontend/src/routes/(public)/signup/+page.svelte)
  - [Public 레이아웃](../../frontend/src/routes/(public)/+layout.svelte)

### 12.3 외부 자료
- [SvelteKit Forms Documentation](https://kit.svelte.dev/docs/form-actions)
- [WCAG 2.1 Guidelines](https://www.w3.org/WAI/WCAG21/quickref/)
- [OWASP Authentication Cheat Sheet](https://cheatsheetseries.owasp.org/cheatsheets/Authentication_Cheat_Sheet.html)

---

**문서 끝**
