# v1.0.0: 통합 기술 명세서 (Technical Specification)

## 1. 기능별 상세 명세

### **Feature 0.1: 신규 사용자 가입 및 이메일 인증**

#### 1.1. 사용자 경험 목표 (UX Goal)

- **User's Job (JTBD):** When AI 페이스메이커를 처음 발견하고 사용해보고 싶을 때, **예비 사용자**는 최소한의 노력으로 **자신만의 계정을 안전하게 생성하고 싶어한다.**
- **Success Metric:** 이 기능의 성공은 '회원가입 시작' 대비 '이메일 인증 완료'까지의 전환율이 높게 유지되는 것으로 판단할 수 있다.

#### 1.2. 구현 요건 (Acceptance Criteria)

- **(정상 시나리오 - 가입 요청)** **Given** 사용자가 회원가입 페이지에서, **When** 유효한 이메일과 비밀번호 정책(최소 10자, 영문 대/소문자, 숫자, 특수문자 포함)을 만족하는 정보를 입력하고 '가입하기' 버튼을 누르면, **Then** 시스템은 인증 이메일을 발송하고, 사용자에게는 "인증 이메일을 발송했습니다. 받은 편지함을 확인해주세요." 라는 안내를 보여준다.
- **(정상 시나리오 - 이메일 인증 완료)** **Given** 사용자가 인증 이메일을 아직 클릭하지 않은 상태에서, **When** 이메일 본문의 '계정 활성화' 링크를 클릭하면, **Then** 사용자의 계정이 '활성' 상태로 변경되고, "인증이 완료되었습니다. 이제 로그인할 수 있습니다." 라는 메시지와 함께 로그인 페이지로 이동한다.
- **(예외 케이스 - 비밀번호 정책 위반)** **Given** 사용자가 회원가입 시, **When** 비밀번호 정책에 맞지 않는 비밀번호를 입력하면, **Then** "비밀번호는 최소 10자 이상이어야 하며, 영문 대/소문자, 숫자, 특수문자를 모두 포함해야 합니다." 와 같이 명확한 에러 메시지를 실시간으로 표시한다.
- **(예외 케이스 - 이미 가입된 이메일)** **Given** 이미 시스템에 등록된 이메일 주소로, **When** 사용자가 가입을 시도하면, **Then** "이미 사용 중인 이메일입니다." 라는 메시지를 표시한다.

### **Feature 0.2: 기존 사용자 로그인**

#### 2.1. 사용자 경험 목표 (UX Goal)

- **User's Job (JTBD):** When 자신의 계획을 확인하거나 새로운 아이디어를 기록하고 싶을 때, **기존 사용자**는 빠르고 안전하게 **자신의 작업 공간에 접근하고 싶어한다.**
- **Success Metric:** 이 기능의 성공은 '로그인 시도' 대비 '로그인 성공' 비율이 높고, 평균 로그인 소요 시간이 짧게 유지되는 것으로 판단할 수 있다.

#### 2.2. 구현 요건 (Acceptance Criteria)

- **(정상 시나리오 - 로그인 성공)** **Given** 이메일 인증까지 완료한 사용자가 로그인 페이지에서, **When** 자신의 이메일과 비밀번호를 정확하게 입력하면, **Then** 시스템은 Access Token(유효기간 1시간)과 Refresh Token(유효기간 14일)을 발급하고, 사용자는 성공적으로 인증되어 자신의 작업 공간(메인 페이지)으로 이동한다.
- **(예외 케이스 - 로그인 실패)** **Given** 사용자가 로그인 시, **When** 잘못된 이메일 또는 비밀번호를 입력하면, **Then** "이메일 또는 비밀번호가 올바르지 않습니다."와 같은 통합된 에러 메시지를 표시한다.
- **(예외 케이스 - 이메일 미인증)** **Given** 사용자가 가입은 했으나 이메일 인증을 완료하지 않은 상태에서, **When** 로그인을 시도하면, **Then** "이메일 인증을 먼저 완료해주세요." 라는 메시지를 표시하고, 인증 메일 재발송 옵션을 제공한다.

### **Feature 0.3: 안전한 로그아웃**

#### 3.1. 사용자 경험 목표 (UX Goal)

- **User's Job (JTBD):** When 공용 컴퓨터를 사용하거나 서비스 이용을 마쳤을 때, **사용자**는 자신의 계정 접근을 안전하게 **종료하고 싶어한다.**
- **Success Metric:** 이 기능의 성공은 로그아웃 기능의 실패율이 0%에 가깝게 유지되는 것으로 판단할 수 있다.

#### 3.2. 구현 요건 (Acceptance Criteria)

- **(정상 시나리오 - 로그아웃)** **Given** 사용자가 로그인된 상태에서, **When** '로그아웃' 버튼을 클릭하면, **Then** 클라이언트에 저장된 모든 토큰(Access, Refresh)이 즉시 삭제되고, 사용자는 로그인 페이지로 리디렉션된다.

### **Feature 0.4: 자동 세션 갱신**

#### 4.1. 사용자 경험 목표 (UX Goal)

- **User's Job (JTBD):** When 서비스에 로그인하여 작업을 하고 있을 때, **사용자**는 보안 세션이 만료되더라도 **자신의 작업 흐름이 끊기지 않기를 원한다.**
- **Success Metric:** 이 기능의 성공은 로그인 후 14일 이내에 접속한 사용자가 Access Token 만료로 인해 재로그인을 경험하는 비율이 0%에 가까운 것으로 판단할 수 있다.

#### 4.2. 구현 요건 (Acceptance Criteria)

- **(정상 시나리오 - 자동 세션 갱신)** **Given** 사용자가 로그인 후 1시간이 경과하여 Access Token이 만료된 상태에서, **When** 보호된 API를 요청하면, **Then** 클라이언트는 Refresh Token을 사용하여 자동으로 새로운 Access Token을 발급받고, 중단됐던 API 요청을 새로운 토큰으로 재시도하여 사용자는 인지하지 못한 채 서비스를 계속 이용할 수 있다.
- **(예외 케이스 - 세션 완전 만료)** **Given** Refresh Token마저 만료된 상태(예: 14일 이상 미접속)에서, **When** 사용자가 서비스를 이용하려고 하면, **Then** "세션이 만료되었습니다. 다시 로그인해주세요." 라는 메시지와 함께 자동으로 로그아웃 처리되고 로그인 페이지로 이동한다.

### **Feature 1: AI 기반 백로그 정의**

#### 1.1. 사용자 경험 목표 (UX Goal)

- **User's Job (JTBD):** When 머릿속에 '...을 해야 하는데' 라는 막연한 아이디어가 떠올랐을 때, **김성장**은 그것이 다른 생각들(소음)에 묻히기 전에, **명확하고 실행 가능한 일(신호)로 붙잡아 두고 싶어한다.**
- **Success Metric:** 이 기능의 성공은 'AI로 구체화하기' 버튼을 누른 사용자 중, 최종적으로 백로그를 등록 완료하는 비율(전환율)이 높게 유지되는 것으로 판단할 수 있다.

#### 1.2. 구현 요건 (Acceptance Criteria)

- **(정상 시나리오 - AI 구체화 시작)** **Given** 사용자가 아이디어를 입력하는 과정에서, **When** [AI로 구체화하기] 버튼을 누르면, **Then** AI 대화 인터페이스가 열리고, AI가 백로그 구체화를 위한 첫 질문을 던진다.
- **(정상 시나리오 - AI 대화 진행 및 스트리밍 응답)** **Given** AI 대화 인터페이스에서 사용자가 AI의 질문에 답변하면, **When** AI가 답변을 생성하면, **Then** 사용자는 텍스트가 실시간으로 타이핑되는 스트리밍(Streaming) 응답을 볼 수 있다.
- **(정상 시나리오 - 백로그 자동 완성 및 등록)** **Given** AI와의 대화가 충분히 진행되었을 때, **When** 사용자가 대화 종료를 요청하면, **Then** 대화 내용을 바탕으로 '제목', '설명', '완료 조건'이 자동으로 채워진 백로그 미리보기가 표시되고, 사용자는 이를 등록할 수 있다.
- **(예외 케이스 - 네트워크/서버 오류)** **Given** 사용자가 AI와 대화 중, **When** 서버 문제로 응답을 받지 못하면, **Then** "현재 AI와 연결이 원활하지 않습니다. 잠시 후 다시 시도해주세요." 와 같은 에러 메시지를 표시하고, 재시도 옵션을 제공한다.

### **Feature 2: AI 기반 스토리 포인트 추정 및 작업 분할**

#### 2.1. 사용자 경험 목표 (UX Goal)

- **User's Job (JTBD):** When 주간 계획을 세울 때, **김성장**은 각 과제에 필요한 노력을 객관적으로 가늠하여, **자신이 감당할 수 있는 현실적인 계획을 세우고 싶어한다.**
- **Success Metric:** 이 기능의 성공은 2회차 이상 사용자가 자신의 평균 벨로시티 범위 내에서 주간 계획을 수립하는 비율이 높아지는 것으로 판단할 수 있다.

#### 2.2. 구현 요건 (Acceptance Criteria)

- **(정상 시나리오 - 포인트 선택 UI)** **Given** 사용자가 백로그에 스토리 포인트를 할당할 때, **When** 포인트 선택 UI를 열면, **Then** 시스템은 피보나치 수열(1, 2, 3, 5, 8, 13)에 따른 선택지를 제공한다.
- **(정상 시나리오 - 작업 분할 제안)** **Given** 사용자가 특정 백로그에 큰 스토리 포인트(예: 8pt 이상)를 할당하려고 할 때, **When** 포인트를 선택하면, **Then** AI는 백로그 내용을 분석하여 지능적인 작업 분할을 제안한다.
- **(정상 시나리오 - 제안 수락)** **Given** AI가 작업 분할을 제안한 상황에서, **When** 사용자가 [제안 수락] 버튼을 누르면, **Then** 기존 백로그는 유지된 채, 제안된 하위 백로그들이 새로운 백로그로 즉시 생성된다.
- **(정상 시나리오 - 제안 무시)** **Given** AI가 작업 분할을 제안한 상황에서, **When** 사용자가 제안을 무시하면, **Then** 제안 UI는 사라지고 사용자의 원래 선택이 해당 백로그에 그대로 할당된다.
- **(정상 시나리오 - 추정 근거 기록 (선택 사항))** **Given** 사용자가 스토리 포인트를 할당할 때, **When** '추정 근거 (선택 사항)' 텍스트 입력 필드가 제공되면, **Then** 사용자는 필요에 따라 메모를 남길 수 있으며, 이 필드는 필수가 아니다.

### **Feature 3: 스프린트 계획 및 실행**

#### 3.1. 사용자 경험 목표 (UX Goal)

- **User's Job (JTBD):** When 한 주를 시작할 때, **김성장**은 이번 주에 집중할 일들을 명확히 선택하고, **진행 상황을 직관적으로 추적하며 관리하고 싶어한다.**
- **Success Metric:** 이 기능의 성공은 스프린트를 시작한 사용자가 최소 1개 이상의 백로그를 '완료(Done)' 상태로 이동시키는 비율(스프린트 활성 사용자 비율)이 높게 유지되는 것으로 판단할 수 있다.

#### 3.2. 구현 요건 (Acceptance Criteria)

- **(정상 시나리오 - 스프린트 계획 및 시작)** **Given** 사용자가 백로그 목록에서 진행할 백로그들을 선택할 때, **When** 화면에 선택한 총 포인트와 자신의 평균 **주간 환산 벨로시티**가 함께 표시되고, [스프린트 시작하기] 버튼을 누르면, **Then** 칸반 보드 화면으로 이동한다.
- **(정상 시나리오 - 목표 초과 경고)** **Given** 사용자의 선택한 포인트 합계가 평균 벨로시티를 넘어서면, **When** 시스템은 경고성 텍스트를 표시하지만, **Then** 사용자는 이를 무시하고 계획을 확정할 수 있다.
- **(정상 시나리오 - 상태 변경)** **Given** 칸반 보드에서, **When** 사용자가 카드를 드래그 앤 드롭하면, **Then** 카드의 상태가 즉시 서버에 저장되고 화면에 반영된다.

### **Feature 4: 스프린트 마감 및 성과 기록**

#### 4.1. 사용자 경험 목표 (UX Goal)

- **User's Job (JTBD):** When 한 주간의 스프린트 기간이 끝났을 때, **김성장**은 이번 주에 달성한 성과를 최종적으로 확정하고, **성장과 개선을 위한 다음 단계(회고)로 넘어가고 싶어한다.**
- **Success Metric:** 이 기능의 성공은 스프린트를 시작한 사용자가 자신의 성과(벨로시티)를 최종 확정하는 비율(스프린트 완료율)이 높은 것으로 판단할 수 있다.

#### 4.2. 구현 요건 (Acceptance Criteria)

- **(정상 시나리오 - 스프린트 마감)** **Given** 사용자가 진행 중인 스프린트에서, **When** [스프린트 마감하기] 버튼을 누르면, **Then** 시스템은 '완료(Done)' 상태인 백로그들의 총 포인트를 기록하고(`completed_points`), 시작/마감 시각을 저장하며, 회고 시작 화면을 보여준다.
- **(정상 시나리오 - 미완료 작업 처리)** **Given** 미완료 백로그가 남은 상태에서, **When** 사용자가 [스프린트 마감하기]를 누르면, **Then** 해당 미완료 백로그들은 자동으로 '백로그 목록'으로 다시 이동된다.
- **(예외 케이스 - 마감 유도)** **Given** 스프린트 종료 예정일이 지났을 때, **When** 사용자가 서비스에 접속하면, **Then** 마감을 유도하는 모달 또는 배너를 보여준다.

### **Feature 5: AI 기반 회고 및 KPT 리포트 생성**

#### 5.1. 사용자 경험 목표 (UX Goal)

- **User's Job (JTBD):** When 한 주간의 스프린트를 마쳤을 때, **김성장**은 자신의 실행 결과를 객관적으로 돌아보고, **다음 주에 더 나은 성과를 낼 수 있는 구체적인 방법을 찾고 싶어한다.**
- **Success Metric:** 이 기능의 성공은 스프린트를 마감한 사용자가 최종적으로 'AI 회고 요약 리포트'까지 생성하는 비율이 높은 것으로 판단할 수 있다.

#### 5.2. 구현 요건 (Acceptance Criteria)

- **(정상 시나리오 - 데이터 기반 질문)** **Given** 사용자가 '회고 시작하기'를 누르면, **When** AI는 해당 스프린트의 데이터를 기반으로 개인화된 첫 질문을 던진다.
- **(정상 시나리오 - 대화 및 요약)** **Given** 사용자가 AI와 대화를 이어가다가, **When** [요약하고 마치기] 버튼을 누르면, **Then** AI는 전체 대화 내용을 바탕으로 KPT(Keep, Problem, Try) 요약 리포트를 생성하여 보여준다.

### **Feature 6: 시스템 안정성 및 비용 관리**

#### 6.1. 사용자 경험 목표 (UX Goal)

- **User's Job (JTBD):** When AI 페이스메이커를 꾸준히 사용할 때, **사용자**는 서비스가 안정적으로 동작하고 **예상치 못한 문제(오류, 비용) 없이 서비스를 신뢰하고 싶어한다.**
- **Success Metric:** 이 기능의 성공은 '월간 LLM API 비용'이 목표 예산 내에서 관리되고, '치명적인 서비스 장애 발생 건수'가 0에 가깝게 유지되는 것으로 판단할 수 있다.

#### 6.2. 구현 요건 (Acceptance Criteria)

- **(정상 시나리오 - LLM 사용량 제한)** **Given** 시스템에 사용자별 일일 LLM 기능 호출 횟수 제한이 설정되어 있을 때, **When** 사용자가 정해진 횟수를 초과하여 AI 기능을 호출하면, **Then** 시스템은 "오늘의 AI 코칭 횟수를 모두 사용하셨습니다." 와 같은 안내 메시지를 표시한다.
- **(정상 시나리오 - LLM 프롬프트 관리)** **Given** 백엔드 개발자가 LLM 프롬프트를 수정해야 할 때, **When** 코드와 분리된 별도의 설정 파일(`prompts.yml`)을 수정하면, **Then** 재배포 시 새로운 프롬프트가 즉시 시스템에 반영된다.

## 2. 최종 기술 결정사항

- **인증 방식:** JWT 기반 인증 (Access Token 1시간, Refresh Token 14일)
- **스프린트 마감 정책:** 사용자가 직접 마감하는 유연한 마감 정책 채택.
- **벨로시티 계산:** 실제 소요 일수를 반영한 '주간 환산 벨로시티' 공식 적용. `(완료 포인트 / 실제 소요 일수) * 7`
- **LLM 프롬프트 관리:** 코드와 분리된 외부 설정 파일 (`prompts.yml`) 방식 채택.
- **LLM 비용 관리:** 사용자별 일일 API 호출 횟수 제한 정책 적용.
- **프론트엔드 스택:** Svelte5 + Tailwind CSS + shadcn-svelte
- **데이터베이스:** AWS RDS for PostgreSQL
- **LLM 모델:** OpenAI GPT-5
- **클라우드 제공자:** Amazon Web Services (AWS)
- **이메일 발송:** Amazon SES (Simple Email Service)

---
